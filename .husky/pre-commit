# Ensure Node is available when commit is triggered from IDE/git GUI
if ! command -v node >/dev/null 2>&1; then
  if [ -s "$HOME/.nvm/nvm.sh" ]; then
    . "$HOME/.nvm/nvm.sh"
    nvm use --silent >/dev/null 2>&1 || true
  fi
fi

if ! command -v node >/dev/null 2>&1; then
  echo "Node no esta en PATH. Abre el IDE desde una terminal con nvm cargado o configura PATH en el IDE."
  exit 1
fi

if [ -x ./node_modules/.bin/lint-staged ]; then
  ./node_modules/.bin/lint-staged
else
  echo "lint-staged no esta instalado. Ejecuta: npm install"
  exit 1
fi
